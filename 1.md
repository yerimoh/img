
```python
import csv
from chemdataextractor.doc import Document
from chemdataextractor.doc.text import Paragraph
from chemdataextractor.model.units import (TemperatureModel, AngleModel, ChargeModel, ElectricalCurrentModel,
                                           ElectricPotentialModel, EnergyModel, LengthModel, MassModel,
                                           PowerModel, RatioModel, AmountOfSubstanceModel, TimeModel)
from chemdataextractor.model.model import Compound, ModelType, StringType
from chemdataextractor.parse.elements import I
from chemdataextractor.parse.actions import join


yt = 1
# CSV 파일 경로
csv_file_path = f'/hdd1/user25/chemdataextractor2/examples/result/{yt}.csv'  # 파일 경로를 실제 파일이 있는 곳으로 변경해주세요

# 텍스트 파일 경로
text_file_path = f'/hdd1/user25/chemdataextractor2/examples/ddata/{yt}.txt'  # 파일 경로를 실제 파일이 있는 곳으로 변경해주세요


# 모델 정의
class Temperature(TemperatureModel):
    specifier_expr = (I('Temperature')).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)

class Angle(AngleModel):
    specifier_expr = ((I('Angle'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)

class Charge(ChargeModel):
    specifier_expr = ((I('Charge'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    
class ElectricalCurrent(ElectricalCurrentModel):
    specifier_expr = ((I('ElectricalCurrent'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    
class ElectricPotential(ElectricPotentialModel):
    specifier_expr = ((I('ElectricPotential'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
class Length(LengthModel):
    specifier_expr = ((I('Length'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)

class Mass(MassModel):
    specifier_expr = ((I('Mass'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    
class Power(PowerModel):
    specifier_expr = ((I('Power'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    
class Ratio(RatioModel):
    specifier_expr = ((I('Ratio'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    
class Energy(EnergyModel):
    specifier_expr = ((I('Energy'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)


class AmountOfSubstance(AmountOfSubstanceModel):
    specifier_expr = ((I('AmountOfSubstance'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)

class Time(TimeModel):
    specifier_expr = ((I('Time'))).add_action(join)
    specifier = StringType(parse_expression=specifier_expr, required=True, contextual=True, updatable=True)
    compound = ModelType(Compound, required=True, contextual=True)
    


# 클래스별로 모델 정의
models = {
    'Temperature': Temperature,
    'Angle': Angle,
    'Charge': Charge,
    'ElectricalCurrent': ElectricalCurrent,
    'ElectricPotential': ElectricPotential,
    'Energy': Energy,
    'Length': Length,
    'Mass': Mass,
    'Power': Power,
    'Ratio': Ratio,
    'AmountOfSubstance': AmountOfSubstance,
    'Time': Time
}

# 텍스트 파일 읽어와서 처리하여 CSV 파일에 저장
with open(text_file_path, 'r') as file, open(csv_file_path, 'w', newline='') as csvfile:
    writer = csv.writer(csvfile)
    # 헤더 작성
    header = []
    for class_name in models.keys():
        header.append(class_name)
        header.append(class_name + '_num')
    header.append('sum')
    writer.writerow(header)
    hhh = 0
    # 각 행에 대해 반복
    for line in file:
        # 결과를 저장할 변수 초기화
        results = {key: None for key in models.keys()}
        results['sum'] = 0
        hhh +=1
        print(f'{hhh}/5000')
        # Document 객체 생성
        doc = Document(Paragraph(line.strip()))  # 줄 바꿈 문자 제거

        # 각 클래스별로 처리
        for class_name, model_class in models.items():
            # 클래스에 해당하는 모델로 설정
            doc.models = [model_class]

            count_sum = 0
            count = 0
            serialized_records = []  # 발견된 모든 데이터를 저장할 리스트

            for record in doc.records:
                serialized_record = record.serialize()
                if class_name in serialized_record:
                    count += 1
                    count_sum += 1
                    serialized_records.append(serialized_record)  # 발견된 모든 데이터를 저장

            # 결과 저장
            if count == 0:
                results[class_name] = 0
                results[class_name + '_num'] = 0
            else:
                results[class_name] = serialized_records  # 발견된 모든 데이터를 저장
                results[class_name + '_num'] = count

        results['sum'] += count_sum 

        # 결과 작성하여 CSV 파일에 저장
        row = []
        for class_name in models.keys():
            if class_name == 'Temperature':
                # Temperature 클래스의 데이터를 문자열로 변환하여 저장
                row.append(str(results[class_name]))
            else:
                row.append(results[class_name])
            row.append(results[class_name + '_num'])
        row.append(results['sum'])
        writer.writerow(row)


```
![image](https://github.com/yerimoh/img/assets/76824611/07f8fc36-c839-461f-a7a5-e68f0c17be15)
